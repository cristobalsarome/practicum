ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])
field.nr <- 51
data.gr <- hogares.clean[cl2_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])
field.nr <- 51
data.gr <- hogares.clean[cl3_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])
field.nr <- 52
data.gr <- hogares.clean[cl1_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 3, direction = 1,
aesthetics = "fill")
field.nr <- 52
data.gr <- hogares.clean[cl2_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 3, direction = 1,
aesthetics = "fill")
field.nr <- 52
data.gr <- hogares.clean[cl3_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 3, direction = 1,
aesthetics = "fill")
field.nr <- 55
data.gr <- hogares.clean[cl1_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])+xlim(0, 8000)
field.nr <- 55
data.gr <- hogares.clean[cl2_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])+xlim(0, 8000)
field.nr <- 55
data.gr <- hogares.clean[cl3_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])+xlim(0, 8000)
field.nr <- 56
data.gr <- hogares.clean[cl1_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])
field.nr <- 56
data.gr <- hogares.clean[cl2_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])
field.nr <- 56
data.gr <- hogares.clean[cl3_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])
field.nr <- 57
data.gr <- hogares.clean[cl1_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])
field.nr <- 57
data.gr <- hogares.clean[cl2_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])
field.nr <- 57
data.gr <- hogares.clean[cl3_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])
field.nr <- 62
data.gr <- hogares.clean[cl1_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 3, direction = 1,
aesthetics = "fill")
field.nr <- 62
data.gr <- hogares.clean[cl2_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 3, direction = 1,
aesthetics = "fill")
field.nr <- 62
data.gr <- hogares.clean[cl3_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 3, direction = 1,
aesthetics = "fill")
ggplot(deficit_matrix1[c(1:30),], aes(fill=forcats::fct_rev(cond), y=count, x=param)) +
geom_bar(stat="identity")+coord_flip()+scale_fill_manual("cond",values = c("deficitary" = "red", "not_deficitary" = "lightskyblue"))
ggplot(deficit_matrix2[c(1:30),], aes(fill=forcats::fct_rev(cond), y=count, x=param)) +
geom_bar(stat="identity")+coord_flip()+scale_fill_manual("cond",values = c("deficitary" = "red", "not_deficitary" = "lightskyblue"))
ggplot(deficit_matrix3[c(1:30),], aes(fill=forcats::fct_rev(cond), y=count, x=param)) +
geom_bar(stat="identity")+coord_flip()+scale_fill_manual("cond",values = c("deficitary" = "red", "not_deficitary" = "lightskyblue"))
ggplot(deficit_matrix1[c(31:60),], aes(fill=forcats::fct_rev(cond), y=count, x=param)) +
geom_bar(stat="identity")+coord_flip()+scale_fill_manual("cond",values = c("deficitary" = "red", "not_deficitary" = "lightskyblue"))
ggplot(deficit_matrix2[c(31:60),], aes(fill=forcats::fct_rev(cond), y=count, x=param)) +
geom_bar(stat="identity")+coord_flip()+scale_fill_manual("cond",values = c("deficitary" = "red", "not_deficitary" = "lightskyblue"))
ggplot(deficit_matrix3[c(31:60),], aes(fill=forcats::fct_rev(cond), y=count, x=param)) +
geom_bar(stat="identity")+coord_flip()+scale_fill_manual("cond",values = c("deficitary" = "red", "not_deficitary" = "lightskyblue"))
ggplot(deficit_matrix1[c(61:90),], aes(fill=forcats::fct_rev(cond), y=count, x=param)) +
geom_bar(stat="identity")+coord_flip()+scale_fill_manual("cond",values = c("deficitary" = "red", "not_deficitary" = "lightskyblue"))
ggplot(deficit_matrix2[c(61:90),], aes(fill=forcats::fct_rev(cond), y=count, x=param)) +
geom_bar(stat="identity")+coord_flip()+scale_fill_manual("cond",values = c("deficitary" = "red", "not_deficitary" = "lightskyblue"))
ggplot(deficit_matrix3[c(61:90),], aes(fill=forcats::fct_rev(cond), y=count, x=param)) +
geom_bar(stat="identity")+coord_flip()+scale_fill_manual("cond",values = c("deficitary" = "red", "not_deficitary" = "lightskyblue"))
field.nr <- 12
data.gr <- hogares.clean[cl4_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",bins = 20)+ggtitle(english_labels[field.nr])
field.nr <- 13
data.gr <- hogares.clean[cl4_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 1, direction = 1,
aesthetics = "fill")
field.nr <- 14
data.gr <- hogares.clean[cl4_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 1, direction = 1,
aesthetics = "fill")
field.nr <- 17
data.gr <- hogares.clean[cl4_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 1, direction = 1,
aesthetics = "fill")
field.nr <- 22
data.gr <- hogares.clean[cl4_index,field.nr,drop=F]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 3, direction = 1,
aesthetics = "fill")
source("Hogares_data_preparation.R")
View(metadata2)
field.nr <- 1
data.gr <- hogares.clean[field.nr]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(bins = 50,fill="steelblue",color="black")+ggtitle(english_labels[field.nr])
field.nr <- 1
data.gr <- hogares.clean[field.nr]
ggplot(data.gr, aes(data.gr[[1]],fill=data.gr[[1]])) +
stat_count()+ggtitle(english_labels[field.nr])+
theme(axis.text.x = element_text(angle = 30, hjust = 1))+scale_fill_brewer( type = "qual", palette = 1, direction = 1,
aesthetics = "fill")
field.nr <- 2
data.gr <- hogares.clean[field.nr]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(bins = 50,fill="steelblue",color="black")+ggtitle(english_labels[field.nr])+xlim(0, 12000)
field.nr <- 2
data.gr <- hogares.clean[field.nr]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(bins = 50,fill="steelblue",color="black")+ggtitle(english_labels[field.nr])
poverty.binary
unname(poverty.binary)
field.nr <- 4
data.gr <- hogares.clean[field.nr]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(bins = 50,fill="steelblue",color="black")+ggtitle(english_labels[field.nr])
field.nr <- 5
data.gr <- hogares.clean[field.nr]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(bins = 50,fill="steelblue",color="black")+ggtitle(english_labels[field.nr])
field.nr <- 6
data.gr <- hogares.clean[field.nr]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(bins = 50,fill="steelblue",color="black")+ggtitle(english_labels[field.nr])
field.nr <- 11
data.gr <- hogares.clean[field.nr]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",binwidth = 1)+ggtitle(english_labels[field.nr])
field.nr <- 11
data.gr <- hogares.clean[field.nr]
ggplot(data.gr, aes(data.gr[[1]])) +
geom_histogram(fill="steelblue",color="black",binwidth = 0.5)+ggtitle(english_labels[field.nr])
fields_of_int <- c(7,9,15,16,17,18,21,22,23,24,43:48,49,55,58,59,60,61,62,68)
metadata2$english_labels[fields_of_int]
#write only once
#write.xlsx(cbind.data.frame(metadata,metadata2),"metadata2.xlsx")
#We import the english labels from the excel file
english_labels <- read.xlsx("metadata_modified.xlsx",1,stringsAsFactors=F)[[3]]
#write only once #write.csv(english_labels,file = "english_labels.csv")
metadata2 <- cbind.data.frame( english_labels,metadata2)
#hogares (homes)
#Reading the .sav file (SPSS)
hogares.filename <- "Base EDSA hogares 2010.DifusiÃ³n (V.BETA).sav"
hogares <- read.spss(hogares.filename)
hogares.attr<-attributes(hogares)
hogares.df <- read.spss(hogares.filename,to.data.frame = T)
#str(hogares.df)
#Writing data into a CSV
#write.csv(hogares.df,file="homes_data.csv")
#Removing 29 observations with missing values (5682 to 5653)
#LOST FIELD ATTRIBUTES SUBSETING
hogares.clean <- hogares.df[!is.na(hogares.df$PON_HOG),]
metadata <- as.data.frame(hogares.attr[c(2,3)])
metadata$field_nr <- c(1:length(metadata[[1]]))
metadata$type <- as.vector(sapply(hogares.df,class))
metadata$levels <- sapply(hogares.df,levels) %>% sapply(paste,collapse="; ") %>% as.vector()
#We export metadata (only once)
#write.xlsx(metadata,"metadata.xlsx")
#We add some information to metadata
metadata2 <- as.data.frame(hogares.attr[c(2,3)])
metadata2$field_nr <- c(1:length(metadata2[[1]]))
metadata2$type <- as.vector(sapply(hogares.clean,class))
metadata2$levels <- sapply(hogares.clean,levels) %>% sapply(paste,collapse="; ") %>% as.vector()
#write only once
#write.xlsx(cbind.data.frame(metadata,metadata2),"metadata2.xlsx")
#We import the english labels from the excel file
english_labels <- read.xlsx("metadata_modified.xlsx",1,stringsAsFactors=F)[[3]]
#write only once #write.csv(english_labels,file = "english_labels.csv")
metadata2 <- cbind.data.frame( english_labels,metadata2,stringsAsFactors=F)
metadata2 <- metadata2[c(4,1:3,5,6)]
##Data preprocessing
#hogares (homes)
#Reading the .sav file (SPSS)
hogares.filename <- "Base EDSA hogares 2010.DifusiÃ³n (V.BETA).sav"
hogares <- read.spss(hogares.filename)
hogares.attr<-attributes(hogares)
hogares.df <- read.spss(hogares.filename,to.data.frame = T)
#str(hogares.df)
#Writing data into a CSV
#write.csv(hogares.df,file="homes_data.csv")
#Removing 29 observations with missing values (5682 to 5653)
#LOST FIELD ATTRIBUTES SUBSETING
hogares.clean <- hogares.df[!is.na(hogares.df$PON_HOG),]
metadata <- as.data.frame(hogares.attr[c(2,3)])
metadata$field_nr <- c(1:length(metadata[[1]]))
metadata$type <- as.vector(sapply(hogares.df,class))
metadata$levels <- sapply(hogares.df,levels) %>% sapply(paste,collapse="; ") %>% as.vector()
#We export metadata (only once)
#write.xlsx(metadata,"metadata.xlsx")
metadata <- as.data.frame(hogares.attr[c(2,3)],stringsAsFactors=F)
source('C:/OneDrive/2018/_CSP572_Practicum/EDSA UCA/Hogares_data_preparation.R')
fields_of_int <- c(7,9,15,16,17,18,21,22,23,24,43:48,49,55,58,59,60,61,62,68)
metadata2$english_labels[fields_of_int]
table(hogares.clean[fields_of_int[[c(1,2)]]])
fields_of_int[[c(1,2)]]
#fields of interest
FoI <- c(7,9,15,16,17,18,21,22,23,24,43:48,49,55,58,59,60,61,62,68)
metadata2$english_labels[FoI]
FoI[c(1,2)]
table(hogares.clean[FoI[c(1,2)]])
matrix_1_2 <- table(hogares.clean[FoI[c(1,2)]])
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt(matrix_1_2)
melt_1_2 <- melt(matrix_1_2)
names(melt_1_2)
matrix_1_2
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Spectral")+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues")+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = -1)+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_bewer(palette = "Blues",direction = -1)+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_brewer(palette = "Blues",direction = -1)+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = -1)+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = 1)+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
metadata2$english_labels[field1]
field1 <- foi[1]
field1 <- FoI[1]
field2 <- FoI[3]
plot_matrix <- as.matrix(table(hogares.clean[field1,field2]))
plot_melt <- melt(plot_matrix)
ggplot(data = melt_1_2, aes(x=metadata2$english_labels[field1], y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = 1)+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
names(plot_melt)
field1 <- FoI[1]
field2 <- FoI[3]
plot_matrix <- as.matrix(table(hogares.clean[field1,field2]))
plot_melt <- melt(plot_matrix)
names(plot_melt)
ggplot(data = melt_1_2, aes(x=Var1, y=Var2, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = 1)+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
names(plot_melt)
View(plot_melt)
field1 <- FoI[1]
field2 <- FoI[3]
plot_matrix <- as.matrix(table(hogares.clean[field1,field2]))
plot_melt <- melt(plot_matrix)
names(plot_melt)
hogares.clean[field1,field2]
field1
field1 <- FoI[1]
field2 <- FoI[3]
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
names(plot_melt)
ggplot(data = melt_1_2, aes(x=Var1, y=Var2, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = 1)+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
field1 <- FoI[1]
field2 <- FoI[3]
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
#names(plot_melt)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=region, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = 1)+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
names(plot_melt)
field1 <- FoI[1]
field2 <- FoI[3]
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
#names(plot_melt)
ggplot(data = plot_melt, aes(x=socio_ec_class_7, y=region, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = 1)+theme(axis.text.x = element_text(angle = 60, hjust = 1))+theme(panel.grid= element_line(colour = "black"))
field1 <- FoI[1]
field2 <- FoI[3]
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
#names(plot_melt)
ggplot(data = plot_melt, aes(x=socio_ec_class_7, y=region, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = 1)
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = 1)
field1 <- FoI[1]
field2 <- FoI[3]
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
#names(plot_melt)
ggplot(data = plot_melt, aes(x=socio_ec_class_7, y=region, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = 1)
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)
melt(matrix_1_2)
View(melt_1_2)
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)
melt_1_2!=0
melt_1_2$value!=0
matrix_1_2 <- as.matrix(table(hogares.clean[FoI[c(1,2)]]))
melt_1_2 <- melt(matrix_1_2)
melt_1_2 <- melt_1_2[melt_1_2$value!=0,]
ggplot(data = melt_1_2, aes(x=socio_ec_class_7, y=work_class, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)
field1 <- FoI[1]
field2 <- FoI[3]
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
#names(plot_melt)
ggplot(data = plot_melt, aes(x=socio_ec_class_7, y=region, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "Blues",direction = 1)
field1 <- FoI[1]
field2 <- FoI[3]
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
#names(plot_melt)
ggplot(data = plot_melt, aes(x=socio_ec_class_7, y=region, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
names(plot_melt)
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
#names(plot_melt)
ggplot(data = plot_melt, aes(x=head_household_sex, y=region, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
#names(plot_melt)
ggplot(data = plot_melt, aes(y=head_household_sex, x=region, fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
#names(plot_melt)
ggplot(data = plot_melt, aes( fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
#names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[1],y=plot_melt[2] fill=value)) +
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
#names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[1],y=plot_melt[2], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
#names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)
plot_names <- names(plot_melt)
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
plot_names <- names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
plot_names <- names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])
+xlab(plot_names[2])
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
plot_names <- names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])
+ylab(plot_names[2])
field1 <- 15
field2 <-22
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
plot_names <- names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])+ylab(plot_names[2])
field1 <- 15
field2 <-18
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
plot_names <- names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])+ylab(plot_names[2])
field1 <- 15
field2 <-24
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
plot_names <- names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])+ylab(plot_names[2])
field1 <- 15
field2 <-62
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
plot_names <- names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])+ylab(plot_names[2])
field1 <- 9
field2 <-62
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
plot_names <- names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])+ylab(plot_names[2])
field1 <- 9
field2 <-49
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
plot_names <- names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])+ylab(plot_names[2])
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])+ylab(plot_names[2])+theme(axis.text.x = element_text(angle = 60, hjust = 1))
field1 <- 49
field2 <-9
plot_matrix <- as.matrix(table(hogares.clean[c(field1,field2)]))
plot_melt <- melt(plot_matrix)
plot_melt <- plot_melt[plot_melt$value!=0,]
plot_names <- names(plot_melt)
ggplot(data = plot_melt, aes(x=plot_melt[[1]],y=plot_melt[[2]], fill=value)) +
geom_tile()+scale_fill_distiller(palette = "GnBu",direction = 1)+xlab(plot_names[1])+ylab(plot_names[2])+theme(axis.text.x = element_text(angle = 60, hjust = 1))
